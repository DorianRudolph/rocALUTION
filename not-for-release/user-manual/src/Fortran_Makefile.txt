CC=g++
FC=gfortran
FLAGS=-O3 -lstdc++ -fopenmp
INC=-I../../../build/inc
LIB=../../../build/lib/libparalution.so
OBJ=paralution_fortran.o fortran_code.o

default: fortran_code

fortran_code: $(OBJ)
	$(FC) -o fortran_code $(OBJ) $(LIB) $(FLAGS)

fortran_code.o: fortran_code.f90
	$(FC) $(FLAGS) -c fortran_code.f90

paralution_fortran.o: ../../plug-ins/paralution_fortran.cpp
	$(CC) $(FLAGS) $(INC) -c ../../plug-ins/paralution_fortran.cpp

clean:
	rm -rf *.o fortran_code
